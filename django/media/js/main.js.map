{"version":3,"sources":["webpack:///webpack/bootstrap 22cea1fa37d3adf0b375","webpack:///./src/js/main.js","webpack:///./node_modules/node-js-marker-clusterer/src/markerclusterer.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/google-maps/lib/Google.js"],"names":["map","markers","markerclusterer","activeMarker","activeMarkerIndex","lastTouch","MarkerClusterer","require","google","timeoutControlFade","initialZoom","initialLatitude","initialLongitude","currentState","currentCity","currentLanguage","defaultTitle","document","title","languages","GoogleMapsLoader","KEY","fillSelect","type","url","xhr","XMLHttpRequest","hash","window","location","substr","onload","data","JSON","parse","responseText","select","querySelector","option","i","length","insertAdjacentHTML","pk","stringify","split","join","name","selectedIndex","dispatchEvent","Event","onerror","console","log","open","responseType","send","resizeContent","win","content","emSize","parseFloat","getComputedStyle","fontSize","style","width","height","offsetWidth","offsetHeight","localizeData","lang","navigator","language","userLanguage","includes","options","value","status","key","elem","innerHTML","fillLanguage","meta","fillLanguages","addEventListener","event","target","addMarkerCluster","clusterStyles","textColor","mcOptions","gridSize","styles","maxZoom","changeImage","direction","currentTarget","dataset","button","index","parseInt","id","newIndex","maps","trigger","imageTouchStart","timeStamp","changedTouches","pageX","pageY","imageTouchEnd","distX","timeDiff","minSwipe","resizeImageWindow","image","container","scalePercentage","classList","contains","mediaHeight","mediaWidth","setTimeout","backgroundImage","src","add","tagName","toLowerCase","videoHeight","videoWidth","naturalHeight","naturalWidth","remove","imageHeight","innerHeight","imageWidth","innerWidth","updateShareIcons","href","docRoot","lastIndexOf","encodeURIComponent","imageUrl","indexOf","twitterIcon","googleIcon","facebookLink","mailLink","openWindow","winContent","doResize","controls","querySelectorAll","buttonDelete","buttonMute","buttonClose","navigation","media","control","hasAttribute","addMarkerClick","marker","addListener","captionText","city","state","description","contentType","panTo","position","setOptions","keyboardShortcuts","fadeControls","clearTimeout","addMarkers","placemarks","responseXML","documentElement","getElementsByTagName","forEach","call","element","textContent","desc","pos","LatLng","latitude","longitude","address","Marker","icon","push","hashIndex","isNaN","init","latlng","myOptions","zoom","center","mapTypeId","MapTypeId","SATELLITE","Map","getElementById","enterFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","getCookie","cookieValue","cookie","cookies","trim","substring","decodeURIComponent","stopVideo","video","pause","currentTime","showInfo","item","updateSelect","text","selected","background","cities","cityData","display","sw","max_latitude","max_longitude","ne","min_latitude","min_longitude","LatLngBounds","bounds","extend","fitBounds","e","setCenter","setZoom","muteVideo","csrftoken","buttonUnmute","muted","volume","alert","mute","setRequestHeader","deletePicture","confirm","setMap","splice","buttonCleanup","mapElem","focus","buttons","defaultText","removeAttribute","reload","setAttribute","selects","keyCode","fullScreenChange","load","g"],"mappings":"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YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,qBAAqB;AAC9C;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,2BAA2B;AACvC,YAAY,OAAO;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,wBAAwB;AACpC;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,2BAA2B;AACtC,WAAW,SAAS;AACpB;AACA;AACA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,sBAAsB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB,YAAY,QAAQ;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,2BAA2B;AACtC,WAAW,SAAS;AACpB;AACA;AACA;;AAEA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,yBAAyB;AACpC,YAAY,yBAAyB;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,yBAAyB;AACpC,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA,0BAA0B,6BAA6B;AACvD;AACA;;AAEA;AACA,yBAAyB,2BAA2B;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,mBAAmB;AAC9B,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,0BAA0B,6BAA6B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,2BAA2B;AACpD;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,sBAAsB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,yBAAyB;AACrC;AACA;AACA;AACA;AACA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,2BAA2B;AACvC;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,mBAAmB;AAC/B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,YAAY,kBAAkB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,YAAY,OAAO;AACnB;AACA;AACA;AACA,sDAAsD;AACtD;AACA,6DAA6D;;AAE7D;AACA;AACA;AACA;AACA,cAAc,uCAAuC;AACrD,KAAK;AACL,gDAAgD;AAChD,cAAc;AACd;AACA;AACA;AACA;AACA,cAAc,wCAAwC;AACtD,KAAK;AACL,8CAA8C,mBAAmB;AACjE;AACA,GAAG;AACH,8CAA8C;AAC9C,2BAA2B,6BAA6B,mBAAmB;AAC3E;;AAEA;AACA;;AAEA,6BAA6B,qBAAqB;AAClD,kBAAkB,wBAAwB,mBAAmB;AAC7D,oBAAoB,8BAA8B;AAClD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;;;;;AC/wCA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA;;AAEA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;;AAEA,CAAC;;;AAGD;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,sBAAsB;AACnC;AACA;;AAEA;AACA;;;AAGA;;AAEA,CAAC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22cea1fa37d3adf0b375","'use strict';\n\nlet map,\n\tmarkers = [],\n\tmarkerclusterer,\n\tactiveMarker,\n\tactiveMarkerIndex,\n\tlastTouch = [],\n\tMarkerClusterer = require('node-js-marker-clusterer'),\n\tgoogle = null,\n\ttimeoutControlFade,\n\tinitialZoom = 4,\n\tinitialLatitude = 38.9284715,\n\tinitialLongitude = -97.5515638,\n\tcurrentState,\n\tcurrentCity,\n\tcurrentLanguage,\n\tdefaultTitle = document.title,\n\tlanguages = ['de', 'en'];\n\nlet GoogleMapsLoader = require('google-maps');\nGoogleMapsLoader.KEY = 'AIzaSyD_C6GDv2SAhTGc2ijeomtQThYpS761PvU';\n\nconst fillSelect = (type, url) => {\n\tlet xhr = new XMLHttpRequest(),\n\t\thash = window.location.hash.substr(1);\n\n\txhr.onload = () => {\n\t\tlet data = JSON.parse(xhr.responseText);\n\t\tlet select = document.querySelector('.gallery__select--' + type),\n\t\t\toption;\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\toption = data[i];\n\t\t\tselect.insertAdjacentHTML('beforeend', '<option data-id=\"' + option.pk + '\" value=\"' + JSON.stringify(option).split('\\\"').join('\\'') + '\">' + option.name + '</option>');\n\t\t\tif (option.name === hash) {\n\t\t\t\tselect.selectedIndex = i + 1;\n\t\t\t\tselect.dispatchEvent(new Event('change'));\n\t\t\t}\n\t\t}\n\t};\n\txhr.onerror = () => {\n\t  console.log('Error while getting ' + url + '.');\n\t};\n\txhr.open(\"GET\", url);\n\txhr.responseType = 'text';\n\txhr.send();\n};\n\nconst resizeContent = () => {\n\tlet win = document.querySelector('.gallery__window'),\n\t\tcontent = document.querySelector('.gallery__content'),\n\t\temSize = parseFloat(getComputedStyle(content).fontSize);\n\n\twin.style.width = 'auto';\n\twin.style.height = 'auto';\n\tcontent.style.width = 'auto';\n\tcontent.style.height = 'auto';\n\twin.style.width = win.offsetWidth + 'px';\n\twin.style.height = win.offsetHeight + 'px';\n\tcontent.style.width = (content.offsetWidth - (emSize * 2)) + 'px';\n\tcontent.style.height = (content.offsetHeight - (emSize * 2)) + 'px';\n};\n\nconst localizeData = (lang) => {\n\tif (!lang) {\n\t\tlang = navigator.language || navigator.userLanguage;\n\t\tlet hash = window.location.hash.substr(1);\n\t\tif (languages.includes(hash)) {\n\t\t\tlang = hash;\n\t\t}\n\t}\n\n\tlet select = document.querySelector('.gallery__select--language'),\n\t\turl = 'media/locale-' + lang + '.json',\n\t\txhr = new XMLHttpRequest();\n\n\tfor (let i = 0; i < select.options.length; i++) {\n\t\tif (select.options[i].value === lang) {\n\t\t\tselect.selectedIndex = i;\n\t\t}\n\t}\n\txhr.onload = () => {\n\t\tif(xhr.status === 404) {\n\t\t\tlocalizeData('en');\n\t\t}\n\t\telse {\n\t\t\tlet data = JSON.parse(xhr.responseText);\n\t\t\tfor (let key in data) {\n\t\t\t\tlet elem = document.querySelector('[data-locale=\"' + key + '\"]');\n\t\t\t\tif (elem) {\n\t\t\t\t\telem.innerHTML = data[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentLanguage = lang;\n\t\t\tresizeContent();\n\t\t}\n\t};\n\txhr.onerror = () => {\n\t\tlocalizeData('en');\n\t};\n\txhr.open(\"GET\", url);\n\txhr.responseType = 'text';\n\txhr.send();\n};\n\nconst fillLanguage = (select, language) => {\n\tlet xhr = new XMLHttpRequest();\n\n\txhr.onload = () => {\n\t\tlet data = JSON.parse(xhr.responseText);\n\t\tselect.insertAdjacentHTML('beforeend', '<option value=\"' + language + '\">' + data.meta.title + '</option>');\n\t};\n\txhr.onerror = () => {\n\t  console.log('Error while getting ' + language + ' translation.');\n\t};\n\txhr.open(\"GET\", 'media/locale-' + language + '.json');\n\txhr.responseType = 'text';\n\txhr.send();\n};\n\nconst fillLanguages = () => {\n\tlet languages = ['de', 'en'],\n\t\tselect = document.querySelector('.gallery__select--language');\n\n\tfor (let i = 0; i < languages.length; i++) {\n\t\tfillLanguage(select, languages[i]);\n\t}\n\n\tselect.addEventListener('change', (event) => {\n\t\tlocalizeData(event.target.options[event.target.selectedIndex].value);\n\t});\n\n\tlocalizeData();\n};\n\nconst addMarkerCluster = () => {\n\tlet clusterStyles = [\n\t\t{\n\t\t\ttextColor: 'white',\n\t\t\turl: 'media/img/cluster-small.png',\n\t\t\theight: 42,\n\t\t\twidth: 42\n\t\t},\n\t\t{\n\t\t\ttextColor: 'white',\n\t\t\turl: 'media/img/cluster-medium.png',\n\t\t\theight: 54,\n\t\t\twidth: 54\n\t\t},\n\t\t{\n\t\t\ttextColor: 'white',\n\t\t\turl: 'media/img/cluster-large.png',\n\t\t\theight: 66,\n\t\t\twidth: 66\n\t\t}\n\t];\n\n\tlet mcOptions = {\n\t    gridSize: 66,\n\t    styles: clusterStyles,\n\t    maxZoom: 19\n\t};\n\n\tmarkerclusterer = new MarkerClusterer(map, markers, mcOptions);\n};\n\nconst changeImage = (direction) => {\n\tif (typeof direction === 'object') {\n\t\tdirection = direction.currentTarget.dataset.button;\n\t}\n\tlet index = parseInt(document.querySelector('.gallery__image').dataset.id, 10),\n\t\tnewIndex = index;\n\n\tif (direction === 'prev') {\n\t\tnewIndex = (index > 0 ? index - 1 : markers.length-1);\n\t}\n\telse if (direction === 'next') {\n\t\tnewIndex = (index < markers.length - 1 ? index + 1 : 0);\n\t}\n\n\tif (index !== newIndex) {\n\t\tgoogle.maps.event.trigger(markers[newIndex], 'click');\n\t}\n};\n\nconst imageTouchStart = (event) => {\n\tlet timeStamp = event.timeStamp;\n\tif (event.changedTouches.length > 0) {\n\t\tevent = event.changedTouches[0];\n\t}\n\n\tlastTouch = [event.pageX, event.pageY, timeStamp];\n};\n\nconst imageTouchEnd = (event) => {\n\tif (lastTouch.length === 3) {\n\t\tlet timeStamp = event.timeStamp;\n\t\tif (event.changedTouches.length > 0) {\n\t\t\tevent = event.changedTouches[0];\n\t\t}\n\n\t\tlet distX = event.pageX - lastTouch[0],\n\t\t\ttimeDiff = timeStamp - lastTouch[2],\n\t\t\tminSwipe = 100;\n\n\t\tif (timeDiff < 1000) {\n\t\t\tif (distX < -1 * minSwipe) {\n\t\t\t\tchangeImage('next');\n\t\t\t}\n\t\t\telse if (distX > minSwipe) {\n\t\t\t\tchangeImage('prev');\n\t\t\t}\n\t\t}\n\t}\n\tlastTouch = [];\n};\n\nconst resizeImageWindow = () => {\n\tlet win = document.querySelector('.gallery__window'),\n\t\timage = document.querySelector('.gallery__image'),\n\t\tcontainer = document.querySelector('.gallery__content'),\n\t\tscalePercentage = win.classList.contains('gallery--fullscreen') ? 100 : 80,\n\t\tmediaHeight,\n\t\tmediaWidth;\n\n\tif (image && win) {\n\t\twindow.setTimeout(function() {\n\t\t\tcontainer.style.backgroundImage = 'url(' + image.src + ')';\n\t\t}, 1000);\n\n\t\tcontainer.querySelector('.wait-icon').classList.add('gallery--fadeout');\n\n\t\tif (image.tagName.toLowerCase() === 'video') {\n\t\t\tmediaHeight = image.videoHeight;\n\t\t\tmediaWidth = image.videoWidth;\n\t\t}\n\t\telse {\n\t\t\tmediaHeight = image.naturalHeight;\n\t\t\tmediaWidth = image.naturalWidth;\n\t\t\timage.classList.remove('gallery--fadeout');\n\t\t}\n\n\t\tlet imageHeight = window.innerHeight * scalePercentage / 100,\n\t\t\timageWidth = imageHeight * mediaWidth / mediaHeight;\n\n\t\tif (imageWidth > window.innerWidth * scalePercentage / 100) {\n\t\t\timageWidth = window.innerWidth * scalePercentage / 100;\n\t\t\timageHeight = imageWidth * mediaHeight / mediaWidth;\n\t\t}\n\n\t\twin.style.width = imageWidth + 'px';\n\t\twin.style.height = imageHeight + 'px';\n\t\tcontainer.style.width = imageWidth + 'px';\n\t\tcontainer.style.height = imageHeight + 'px';\n\t\timage.style.width = imageWidth + 'px';\n\t\timage.style.height = imageHeight + 'px';\n\t}\n};\n\nconst updateShareIcons = () => {\n\tlet url = window.location.href,\n\t\tdocRoot = url.substr(0, url.lastIndexOf('/')),\n\t\ttitle = encodeURIComponent(document.title),\n\t\timage = document.querySelector('.gallery__image'),\n\t\timageUrl = null;\n\n\tif (image && image.src) {\n\t\timageUrl = docRoot + image.src.substr(image.src.indexOf('/media'));\n\t}\n\n\turl = encodeURIComponent(url + window.location.hash);\n\n\tlet twitterIcon = document.querySelector('.gallery__button--twitter');\n\ttwitterIcon.addEventListener('click', () => {\n\t\twindow.open('https://twitter.com/intent/tweet?text=' + title + ' - ' + url, 'twitter', 'height=400,width=400,resizable=no');\n\t});\n\n\tlet googleIcon = document.querySelector('.gallery__button--google-plus');\n\tgoogleIcon.addEventListener('click', () => {\n\t\twindow.open('https://plus.google.com/share?url=' + (imageUrl ? imageUrl : url), 'twitter', 'height=480,width=400,resizable=no');\n\t});\n\n\tlet facebookLink = document.querySelector('.gallery__button--facebook');\n\tfacebookLink.addEventListener('click', () => {\n\t\twindow.open('https://www.facebook.com/sharer/sharer.php?u=' + (imageUrl ? imageUrl : url), 'facebook', 'height=400,width=400,resizable=no');\n\t});\n\n\tlet mailLink = document.querySelector('.gallery__button--mail');\n\tmailLink.href = 'mailto:?subject=USA%20on%20rails&body=' + title + encodeURIComponent('\\n\\n') + url;\n};\n\nconst openWindow = (winContent, doResize) => {\n\tlet content = document.querySelector('.gallery__content'),\n\t\twin = document.querySelector('.gallery__window'),\n\t\tcontrols = win.querySelectorAll('.gallery__control:not(.gallery__share)'),\n\t\tbuttonDelete = document.querySelector('.gallery__button--delete'),\n\t\tbuttonMute = document.querySelector('.gallery__button--mute, .gallery__button--unmute'),\n\t\tbuttonClose = document.querySelector('.gallery__button--close'),\n\t\timage = document.querySelector('img.gallery__image'),\n\t\tnavigation = document.querySelector('.gallery__navigation');\n\n\tbuttonClose.classList.remove('gallery--hidden');\n\tnavigation.classList.add('gallery--fadeout');\n\n\tif (win.classList.contains('gallery--fadeout')) {\n\t\twin.classList.remove('gallery--fadeout');\n\t\tcontent.classList.remove('gallery--fadeout');\n\t}\n\n\tcontent.innerHTML = winContent;\n\n\tlet media = document.querySelector('.gallery__image');\n\tif (media) {\n\t\tmedia.classList.add('gallery--visible');\n\t\twindow.location.hash = activeMarkerIndex;\n\t\tupdateShareIcons();\n\t\tcontent.classList.add('gallery__image-container');\n\t\tif (!content.querySelector('.wait-icon')) {\n\t\t\tcontent.insertAdjacentHTML('beforeend', '<div class=\"wait-icon\"></div>');\n\t\t}\n\t\tmedia.addEventListener('touchstart', imageTouchStart);\n\t\tmedia.addEventListener('touchend', imageTouchEnd);\n\t\tmedia.addEventListener('load', resizeImageWindow);\n\t\tmedia.addEventListener('loadedmetadata', resizeImageWindow);\n\n\t\tfor (let i in controls) {\n\t\t\tlet control = controls[i];\n\t\t\tif (control.classList) {\n\t\t\t\tcontrol.classList.remove('gallery--hidden');\n\t\t\t}\n\t\t}\n\n\t\tif (window.location.href.indexOf(':8000') > -1) {\n\t\t\tbuttonDelete.classList.remove('gallery--hidden');\n\n\t\t\tif (media.classList.contains('gallery__video')) {\n\t\t\t\tmedia = document.querySelector('.gallery__video');\n\n\t\t\t\tif (media.hasAttribute('muted')) {\n\t\t\t\t\tbuttonMute.classList.remove('gallery__button--mute');\n\t\t\t\t\tbuttonMute.classList.add('gallery__button--unmute');\n\t\t\t\t}\n\t\t\t\tbuttonMute.classList.remove('gallery--hidden');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbuttonMute.classList.add('gallery--hidden');\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tbuttonDelete.classList.add('gallery--hidden');\n\t\t\tbuttonMute.classList.add('gallery--hidden');\n\t\t}\n\t}\n\n\tif (doResize) {\n\t\tresizeContent();\n\t}\n};\n\nconst addMarkerClick = (marker, data) => {\n\tmarker.addListener('click', () => {\n\t\tlet captionText = document.querySelector('.gallery__image-caption-text');\n\n\t\tdocument.title = [data.title, data.city, data.state].join(', ');\n\n\t\tcaptionText.innerHTML = marker.description;\n\n\t\tactiveMarker = marker;\n\t\tactiveMarkerIndex = marker.index;\n\n\t\tif (marker.contentType === 'photo') {\n\t\t\topenWindow('<img class=\"gallery__image gallery--fadeout\" data-pk=\"' + data.pk + '\" data-id=\"' + marker.index + '\" src=\"' + marker.url + '\" />');\n\t\t}\n\t\telse {\n\t\t\topenWindow('<video controls ' + (marker.url.indexOf('#muted') > -1 ? 'muted ' : '') + 'autoplay class=\"gallery__image gallery__video\" data-pk=\"' + data.pk + '\" data-id=\"' + marker.index + '\" src=\"' + marker.url + '\" />');\n\t\t}\n\n\t\tmap.panTo(marker.position);\n\n\t\tmap.setOptions({ keyboardShortcuts: false });\n\t});\n};\n\nconst fadeControls = () => {\n\twindow.clearTimeout(timeoutControlFade);\n\tlet controls = document.querySelectorAll('.gallery__window .gallery__control');\n\tfor (let i in controls) {\n\t\tlet control = controls[i];\n\t\tif (control.classList) {\n\t\t\tcontrol.classList.remove('gallery--fadeout');\n\t\t}\n\t}\n\ttimeoutControlFade = window.setTimeout(() => {\n\t\tfor (let i in controls) {\n\t\t\tlet control = controls[i];\n\t\t\tif (control.classList) {\n\t\t\t\tcontrol.classList.add('gallery--fadeout');\n\t\t\t}\n\t\t}\n\t}, 3000);\n};\n\nconst addMarkers = () => {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onload = () => {\n\t\tlet placemarks = xhr.responseXML.documentElement.getElementsByTagName(\"Placemark\");\n\t\t[].forEach.call(placemarks, (element) =>{\n\t\t\t//get coordinates and place name\n\t\t\tlet url = element.getElementsByTagName('name')[0].textContent,\n\t\t\t\tdesc = element.getElementsByTagName('description')[0].textContent,\n\t\t\t\tdata = JSON.parse(desc);\n\n\t\t\tlet pos = new google.maps.LatLng(data.latitude, data.longitude),\n\t\t\t\ttitle = data.title;\n\n\t\t\tif (data.address !== data.title) {\n\t\t\t\ttitle += (title !== '' ? ', ' : '') + data.address;\n\t\t\t}\n\t\t\ttitle += (title !== '' ? '<br />' : '') + data.city + \", \" + data.state;\n\n\t\t\tlet contentType = (url.indexOf('.jpg') > -1 ? 'photo' : 'video');\n\n\t\t\tlet marker = new google.maps.Marker({\n\t\t\t\tindex: markers.length,\n\t\t\t\tposition: pos,\n\t\t\t\tcontentType: contentType,\n\t\t\t\tdescription: title,\n\t\t\t\tmap: map,\n\t\t\t\turl: url,\n\t\t\t\ttitle: data.title,\n\t\t\t\ticon: 'media/img/marker-' + contentType + '.png'\n\t\t\t});\n\n\t\t\taddMarkerClick(marker, data);\n\n\t\t\tmarkers.push(marker);\n\t\t});\n\t\taddMarkerCluster();\n\n\t\tlet hashIndex = parseInt(window.location.hash.substr(1), 10);\n\t\tif (!isNaN(hashIndex) && markers[hashIndex]) {\n\t\t\tgoogle.maps.event.trigger(markers[hashIndex], 'click');\n\t\t}\n\t};\n\txhr.onerror = () => {\n\t  console.log('Error while getting media/locations.kml.');\n\t};\n\txhr.open('GET', 'media/locations.kml');\n\txhr.responseType = 'document';\n\txhr.send();\n};\n\n//initialise a map\nconst init = () => {\n\tlet latlng = new google.maps.LatLng(initialLatitude, initialLongitude),\n\t\tmyOptions = {\n\t\t\tzoom: initialZoom,\n\t\t\tcenter: latlng,\n\t\t\tmapTypeId: google.maps.MapTypeId.SATELLITE // HYBRID\n\t\t};\n\n\tmap = new google.maps.Map(document.getElementById('gallery__map'), myOptions);\n\n\tfillSelect('state', 'media/states.json');\n\tfillSelect('city', 'media/cities.json');\n\taddMarkers();\n\tfillLanguages();\n\tupdateShareIcons();\n};\n\nconst enterFullscreen = (element) => {\n\tif(element.requestFullscreen) {\n\t\telement.requestFullscreen();\n\t}\n\telse if(element.mozRequestFullScreen) {\n\t\telement.mozRequestFullScreen();\n\t}\n\telse if(element.webkitRequestFullscreen) {\n\t\telement.webkitRequestFullscreen();\n\t}\n\telse if(element.msRequestFullscreen) {\n\t\telement.msRequestFullscreen();\n\t}\n};\n\nconst exitFullscreen = () => {\n\tif(document.exitFullscreen) {\n\t\tdocument.exitFullscreen();\n\t}\n\telse if(document.mozCancelFullScreen) {\n\t\tdocument.mozCancelFullScreen();\n\t}\n\telse if(document.webkitExitFullscreen) {\n\t\tdocument.webkitExitFullscreen();\n\t}\n};\n\nconst getCookie = (name) => {\n\tlet cookieValue = null;\n\tif (document.cookie && document.cookie !== '') {\n\t\tlet cookies = document.cookie.split(';');\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tlet cookie = cookies[i].trim();\n\t\t\t// Does this cookie string begin with the name we want?\n\t\t\tif (cookie.substring(0, name.length + 1) === (name + '=')) {\n\t\t\t\tcookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn cookieValue;\n};\n\nconst stopVideo = (video) => {\n\tif (video) {\n\t\tvideo.pause();\n\t\tvideo.currentTime = 0;\n\t}\n};\n\nconst showInfo = (type, id) => {\n\tlet xhr = new XMLHttpRequest();\n\n\txhr.onload = () => {\n\t\tlet data = JSON.parse(xhr.responseText);\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tlet item = data[i];\n\t\t\tif (item[type].pk === id && item.language === currentLanguage) {\n\t\t\t\topenWindow('<h1>' + item[type].name + '</h1><p>' + item.description + '</p>', true);\n\t\t\t}\n\t\t}\n\t};\n\txhr.onerror = () => {\n\t\tconsole.log('Error while getting ' + type + '_descriptions.json.');\n\t};\n\txhr.open(\"GET\", 'media/' + type + '_descriptions.json');\n\txhr.responseType = 'text';\n\txhr.send();\n};\n\nconst updateSelect = (event) => {\n\ttry {\n\t\tlet data = JSON.parse(event.currentTarget.options[event.currentTarget.selectedIndex].value.split('\\'').join('\\\"'));\n\n\t\tif (data.state) {\n\t\t\tshowInfo('city', data.pk);\n\t\t\twindow.location.hash = event.currentTarget.options[event.currentTarget.selectedIndex].text;\n\n\t\t\tcurrentCity = data.pk;\n\t\t\tcurrentState = data.state.pk;\n\t\t\tdocument.querySelector('.gallery__select--state [data-id=\"' + data.state.pk + '\"]').selected = true;\n\t\t\tdocument.querySelector('.gallery__select--state').dataset.background = true;\n\t\t\tdocument.querySelector('.gallery__select--state').dispatchEvent(new Event('change'));\n\t\t}\n\t\telse {\n\t\t\tif (!document.querySelector('.gallery__select--state').dataset.background) {\n\t\t\t\tshowInfo('state', data.pk);\n\t\t\t\twindow.location.hash = event.currentTarget.options[event.currentTarget.selectedIndex].text;\n\t\t\t}\n\t\t\tdelete(document.querySelector('.gallery__select--state').dataset.background);\n\t\t\tlet cities = document.querySelectorAll('.gallery__select--city [data-id]');\n\t\t\tfor (let i = 0; i < cities.length; i++) {\n\t\t\t\tlet city = cities[i];\n\t\t\t\tif (city && city.value) {\n\t\t\t\t\tlet cityData = JSON.parse(city.value.split('\\'').join('\\\"'));\n\t\t\t\t\tif (cityData.state.pk === data.pk) {\n\t\t\t\t\t\tcity.style.display = 'block';\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcity.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (currentState !== data.pk) {\n\t\t\t\tdocument.querySelector('.gallery__select--city').selectedIndex = 0;\n\t\t\t\tcurrentState = data.pk;\n\t\t\t}\n\t\t}\n\t\tlet sw = new google.maps.LatLng(data.max_latitude, data.max_longitude);\n\t\tlet ne = new google.maps.LatLng(data.min_latitude, data.min_longitude);\n\t\tnew google.maps.LatLngBounds();\n\t\tlet bounds = new google.maps.LatLngBounds();\n\t\tbounds.extend(sw);\n\t\tbounds.extend(ne);\n\t\tmap.fitBounds(bounds);\n\t}\n\tcatch (e) {\n\t\tif (event.currentTarget.classList.contains('gallery__select--state')) {\n\t\t\tlet cities = document.querySelectorAll('.gallery__select--city [data-id]');\n\t\t\tfor (let i = 0; i < cities.length; i++) {\n\t\t\t\tlet city = cities[i];\n\t\t\t\tcity.style.display = 'block';\n\t\t\t}\n\t\t\tdocument.querySelector('.gallery__select--city').selectedIndex = 0;\n\t\t\tmap.setCenter(new google.maps.LatLng(initialLatitude, initialLongitude));\n\t\t\tmap.setZoom(initialZoom);\n\t\t\tcurrentState = -1;\n\t\t}\n\t\telse {\n\t\t\tdocument.querySelector('.gallery__select--state').dispatchEvent(new Event('change'));\n\t\t}\n\t}\n};\n\nconst muteVideo = () => {\n\tlet csrftoken = getCookie('csrftoken'),\n\t\tvideo = document.querySelector('.gallery__window .gallery__video'),\n\t\tbuttonMute = document.querySelector('.gallery__window .gallery__button--mute'),\n\t\tbuttonUnmute = document.querySelector('.gallery__window .gallery__button--unmute'),\n\t\tid = video.dataset.pk;\n\n\tif (!isNaN(parseInt(id, 10))) {\n\t\tlet xhr = new XMLHttpRequest();\n\t\txhr.onload = () => {\n\t\t\tif (video.muted) {\n\t\t\t\tvideo.muted = false;\n\t\t\t\tvideo.volume = 1;\n\t\t\t\tbuttonUnmute.classList.add('gallery__button--mute');\n\t\t\t\tbuttonUnmute.classList.remove('gallery__button--unmute');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvideo.muted = true;\n\t\t\t\tbuttonMute.classList.remove('gallery__button--mute');\n\t\t\t\tbuttonMute.classList.add('gallery__button--unmute');\n\t\t\t}\n\t\t};\n\t\txhr.onerror = () => {\n\t\t\twindow.alert('Video ' + id + ' konnte nicht gemuted werden: ID nicht lesbar.');\n\t\t};\n\t\tlet data = JSON.stringify({\n\t\t\tmute: (buttonMute ? true : false)\n\t\t});\n\t\txhr.open('PATCH', '/api/images/' + id + '/');\n\t\txhr.responseType = 'text';\n\t\txhr.setRequestHeader('Content-type', 'application/json');\n\t\txhr.setRequestHeader('X-CSRFToken', csrftoken);\n\t\txhr.send(data);\n\t}\n\telse {\n\t\twindow.alert('Video ' + id + ' konnte nicht gemuted werden: ID nicht lesbar.');\n\t}\n}\n\nconst deletePicture = () => {\n\tif (window.confirm('Willst du dieses Bild wirklich löschen?')) {\n\t\tlet csrftoken = getCookie('csrftoken'),\n\t\t\tid = document.querySelector('.gallery__window .gallery__image').dataset.pk;\n\n\t\tif (!isNaN(parseInt(id, 10))) {\n\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\txhr.onload = () => {\n\t\t\t\twindow.alert('Bild ' + id + ' wurde gelöscht, wechsle zum nächsten...');\n\t\t\t\t// Remove marker from map and from markers array\n\t\t\t\tmarkers[activeMarkerIndex].setMap(null);\n\t\t\t\tmarkers.splice(activeMarkerIndex, 1);\n\n\t\t\t\t// Update marker index for all following markers\n\t\t\t\tfor (let i = activeMarkerIndex; i < markers.length; i++) {\n\t\t\t\t\tmarkers[i].index = i;\n\t\t\t\t}\n\n\t\t\t\t// Set back activeMarkerIndex since we will change to the next image which now has the same index as the deleted one\n\t\t\t\tactiveMarkerIndex -= 1;\n\t\t\t\tdocument.querySelector('.gallery__image').dataset.id = activeMarkerIndex;\n\t\t\t\tchangeImage('next');\n\t\t\t};\n\t\t\txhr.onerror = () => {\n\t\t\t\twindow.alert('Bild ' + id + ' konnte nicht gelöscht werden: ID nicht lesbar.');\n\t\t\t};\n\t\t\txhr.open('DELETE', '/api/images/' + id + '/');\n\t\t\txhr.responseType = \"text\";\n\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\txhr.send();\n\t\t}\n\t\telse {\n\t\t\twindow.alert('Bild ' + id + ' konnte nicht gelöscht werden: ID nicht lesbar.');\n\t\t}\n\t}\n};\n\n//bind events for fullscreen button\ndocument.querySelector('[data-button=\"fullscreen\"]').addEventListener('click', (event) => {\n\tif (event.currentTarget.classList.contains('gallery__button--fullscreen')) {\n\t\tenterFullscreen(document.querySelector('.gallery__window'));\n\t}\n\telse {\n\t\texitFullscreen();\n\t}\n});\n\n//bind events for close button\ndocument.querySelector('[data-button=\"close\"]').addEventListener('click', () =>{\n\tlet win = document.querySelector('.gallery__window'),\n\t\tcontrols = win.querySelectorAll('.gallery__control'),\n\t\tcontent = document.querySelector('.gallery__content'),\n\t\tnavigation = document.querySelector('.gallery__navigation'),\n\t\tbuttonCleanup = document.querySelector('.gallery__button--cleanup'),\n\t\tmapElem = document.getElementById('gallery__map'),\n\t\tmedia = document.querySelector('.gallery__image'),\n\t\tvideo = document.querySelector('video');\n\n\texitFullscreen();\n\n\tfor (let i in controls) {\n\t\tlet control = controls[i];\n\t\tif (control.classList) {\n\t\t\tcontrol.classList.add('gallery--hidden');\n\t\t}\n\t}\n\n\twindow.location.hash = '';\n\tdocument.title = defaultTitle;\n\n\twin.classList.add('gallery--fadeout');\n\twin.style.width = '0px';\n\twin.style.height = '0px';\n\tcontent.style.width = '0px';\n\tcontent.style.height = '0px';\n\tif (media) {\n\t\tmedia.style.width = '0px';\n\t\tmedia.style.height = '0px';\n\t}\n\tnavigation.classList.remove('gallery--fadeout');\n\tif (content.classList.contains('gallery__image-container')) {\n\t\tcontent.classList.remove('gallery__image-container');\n\t}\n\telse {\n\t\tcontent.classList.add('gallery--fadeout');\n\t}\n\n\tif (window.location.href.indexOf(':8000') > -1) {\n\t\tbuttonCleanup.classList.remove('gallery--hidden');\n\t}\n\n\tmap.setOptions({ keyboardShortcuts: true });\n\tmapElem.focus();\n\n\tstopVideo(video);\n});\n\n//bind events for prev / next buttons\nlet buttons = document.querySelectorAll('.gallery__image-caption .gallery__button');\nfor (let i in buttons) {\n\tlet button = buttons[i];\n\tif (button.addEventListener) {\n\t\tbutton.addEventListener('click', changeImage);\n\t}\n}\n\n//bind events for delete buttons\ndocument.querySelector('[data-button=\"delete\"]').addEventListener('click', deletePicture);\ndocument.querySelector('[data-button=\"mute\"]').addEventListener('click', muteVideo);\n\ndocument.querySelector('.gallery__button--cleanup').addEventListener('click', () => {\n\tlet xhr = new XMLHttpRequest(),\n\t\tbutton = document.querySelector('.gallery__button--cleanup'),\n\t\tdefaultText = 'Daten bereinigen';\n\n\txhr.onload = () => {\n\t\tbutton.removeAttribute('disabled');\n\t\tbutton.innerHTML = defaultText;\n\t\twindow.location.reload(true);\n\t};\n\txhr.onerror = () => {\n\t\twindow.alert('Fehler beim Bereinigen der Bilder.');\n\t\tbutton.removeAttribute('disabled');\n\t\tbutton.innerHTML = defaultText;\n\t};\n\txhr.open('GET', '/cleanup_images');\n\txhr.responseType = \"text\";\n\txhr.send();\n\n\tbutton.setAttribute('disabled', 'disabled');\n\tbutton.innerHTML = '<span class=\"wait-icon\"></span> bitte warten';\n});\n\nlet selects = document.querySelectorAll('.gallery__select');\nfor (let i = 0; i < selects.length; i++) {\n\tlet select = selects[i];\n\tselect.addEventListener('mousedown', (event) => {\n\t\tevent.currentTarget.selectedIndex = -1;\n\t});\n\tselect.addEventListener('change', updateSelect);\n}\n\ndocument.addEventListener('keyup', (event) => {\n\tif (document.querySelectorAll('.gallery__window.gallery--fadeout').length <= 0 && document.querySelectorAll('.gallery__image').length > 0 ) {\n\t\tif (event.keyCode === 37) { // left\n\t\t\tchangeImage('prev');\n\t\t} else if (event.keyCode === 39) { // right\n\t\t\tchangeImage('next');\n\t\t}\n\t}\n\n\tif (event.keyCode === 27) { // escape\n\t\tif (!document.querySelector('.gallery__window').classList.contains('gallery--fullscreen')) {\n\t\t\tdocument.querySelector('[data-button=\"close\"]').dispatchEvent(new Event('click'));\n\t\t}\n\t}\n});\n\nwindow.addEventListener('resize', resizeImageWindow);\n\nconst fullScreenChange = () => {\n\tif (!document.querySelector('.gallery__window').classList.contains('gallery--fullscreen')) {\n\t\tdocument.querySelector('.gallery__window').classList.add('gallery--fullscreen');\n\t\tdocument.querySelector('[data-button=\"fullscreen\"]').classList.remove('gallery__button--fullscreen');\n\t\tdocument.querySelector('[data-button=\"fullscreen\"]').classList.add('gallery__button--windowed');\n\t}\n\telse {\n\t\tdocument.querySelector('.gallery__window').classList.remove('gallery--fullscreen');\n\t\tdocument.querySelector('[data-button=\"fullscreen\"]').classList.remove('gallery__button--windowed');\n\t\tdocument.querySelector('[data-button=\"fullscreen\"]').classList.add('gallery__button--fullscreen');\n\t}\n\tresizeImageWindow();\n};\n\ndocument.addEventListener('fullscreenchange', fullScreenChange);\ndocument.addEventListener('mozfullscreenchange', fullScreenChange);\ndocument.addEventListener('webkitfullscreenchange', fullScreenChange);\ndocument.addEventListener('MSFullscreenChange', fullScreenChange);\n\ndocument.addEventListener('mousemove', fadeControls);\ndocument.addEventListener('keyup', fadeControls);\ndocument.addEventListener('click', fadeControls);\n\nGoogleMapsLoader.load((g) => {\n\tgoogle = g;\n\tinit();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","/**\n * Npm version of markerClusterer works great with browserify and google maps for commonjs\n * https://www.npmjs.com/package/googlemaps\n * Difference from the original - adds a commonjs format and replaces window with global and some unit test\n * The original functionality it's not modified for docs and original source check\n * https://github.com/googlemaps/js-marker-clusterer\n */\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Wether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n  // MarkerClusterer implements google.maps.OverlayView interface. We use the\n  // extend function to extend MarkerClusterer with google.maps.OverlayView\n  // because it might not always be available when the code is defined so we\n  // look for it at the last possible moment. If it doesn't exist now then\n  // there is no point going ahead :)\n  this.extend(MarkerClusterer, google.maps.OverlayView);\n  this.map_ = map;\n\n  /**\n   * @type {Array.<google.maps.Marker>}\n   * @private\n   */\n  this.markers_ = [];\n\n  /**\n   *  @type {Array.<Cluster>}\n   */\n  this.clusters_ = [];\n\n  this.sizes = [53, 56, 66, 78, 90];\n\n  /**\n   * @private\n   */\n  this.styles_ = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  var options = opt_options || {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.gridSize_ = options['gridSize'] || 60;\n\n  /**\n   * @private\n   */\n  this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.maxZoom_ = options['maxZoom'] || null;\n\n  this.styles_ = options['styles'] || [];\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imagePath_ = options['imagePath'] ||\n      this.MARKER_CLUSTER_IMAGE_PATH_;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imageExtension_ = options['imageExtension'] ||\n      this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.zoomOnClick_ = true;\n\n  if (options['zoomOnClick'] != undefined) {\n    this.zoomOnClick_ = options['zoomOnClick'];\n  }\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.averageCenter_ = false;\n\n  if (options['averageCenter'] != undefined) {\n    this.averageCenter_ = options['averageCenter'];\n  }\n\n  this.setupStyles_();\n\n  this.setMap(map);\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.prevZoom_ = this.map_.getZoom();\n\n  // Add the map event listeners\n  var that = this;\n  google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n    var zoom = that.map_.getZoom();\n\n    if (that.prevZoom_ != zoom) {\n      that.prevZoom_ = zoom;\n      that.resetViewport();\n    }\n  });\n\n  google.maps.event.addListener(this.map_, 'idle', function() {\n    that.redraw();\n  });\n\n  // Finally, add the markers\n  if (opt_markers && opt_markers.length) {\n    this.addMarkers(opt_markers, false);\n  }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ =\n    'http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/' +\n    'images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n  return (function(object) {\n    for (var property in object.prototype) {\n      this.prototype[property] = object.prototype[property];\n    }\n    return this;\n  }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n  this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n  if (this.styles_.length) {\n    return;\n  }\n\n  for (var i = 0, size; size = this.sizes[i]; i++) {\n    this.styles_.push({\n      url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n      height: size,\n      width: size\n    });\n  }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n  var markers = this.getMarkers();\n  var bounds = new google.maps.LatLngBounds();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n\n  this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n  this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n  return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n  return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n  return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n  return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n  this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n  return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n  var index = 0;\n  var count = markers.length;\n  var dv = count;\n  while (dv !== 0) {\n    dv = parseInt(dv / 10, 10);\n    index++;\n  }\n\n  index = Math.min(index, numStyles);\n  return {\n    text: count,\n    index: index\n  };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n  this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n  return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    this.pushMarkerTo_(marker);\n  }\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n  marker.isAdded = false;\n  if (marker['draggable']) {\n    // If the marker is draggable add a listener so we update the clusters on\n    // the drag end.\n    var that = this;\n    google.maps.event.addListener(marker, 'dragend', function() {\n      marker.isAdded = false;\n      that.repaint();\n    });\n  }\n  this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n  this.pushMarkerTo_(marker);\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n  var index = -1;\n  if (this.markers_.indexOf) {\n    index = this.markers_.indexOf(marker);\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  if (index == -1) {\n    // Marker is not in our list of markers.\n    return false;\n  }\n\n  marker.setMap(null);\n\n  this.markers_.splice(index, 1);\n\n  return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n  var removed = this.removeMarker_(marker);\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  } else {\n   return false;\n  }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n  var removed = false;\n\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    var r = this.removeMarker_(marker);\n    removed = removed || r;\n  }\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n  if (!this.ready_) {\n    this.ready_ = ready;\n    this.createClusters_();\n  }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n  return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n  this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n  return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n  this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n  return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n  this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n  var projection = this.getProjection();\n\n  // Turn the bounds into latlng.\n  var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng());\n  var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng());\n\n  // Convert the points to pixels and the extend out by the grid size.\n  var trPix = projection.fromLatLngToDivPixel(tr);\n  trPix.x += this.gridSize_;\n  trPix.y -= this.gridSize_;\n\n  var blPix = projection.fromLatLngToDivPixel(bl);\n  blPix.x -= this.gridSize_;\n  blPix.y += this.gridSize_;\n\n  // Convert the pixel points back to LatLng\n  var ne = projection.fromDivPixelToLatLng(trPix);\n  var sw = projection.fromDivPixelToLatLng(blPix);\n\n  // Extend the bounds to contain the new bounds.\n  bounds.extend(ne);\n  bounds.extend(sw);\n\n  return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n  return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n  this.resetViewport(true);\n\n  // Set the markers a empty array.\n  this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n  // Remove all the clusters\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    cluster.remove();\n  }\n\n  // Reset the markers to not be added and to be invisible.\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    marker.isAdded = false;\n    if (opt_hide) {\n      marker.setMap(null);\n    }\n  }\n\n  this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n  var oldClusters = this.clusters_.slice();\n  this.clusters_.length = 0;\n  this.resetViewport();\n  this.redraw();\n\n  // Remove the old clusters.\n  // Do it in a timeout so the other clusters have been drawn first.\n  window.setTimeout(function() {\n    for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n      cluster.remove();\n    }\n  }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n  this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n*/\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n  if (!p1 || !p2) {\n    return 0;\n  }\n\n  var R = 6371; // Radius of the Earth in km\n  var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n  var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  var d = R * c;\n  return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n  var distance = 40000; // Some large number\n  var clusterToAddTo = null;\n  var pos = marker.getPosition();\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    var center = cluster.getCenter();\n    if (center) {\n      var d = this.distanceBetweenPoints_(center, marker.getPosition());\n      if (d < distance) {\n        distance = d;\n        clusterToAddTo = cluster;\n      }\n    }\n  }\n\n  if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n    clusterToAddTo.addMarker(marker);\n  } else {\n    var cluster = new Cluster(this);\n    cluster.addMarker(marker);\n    this.clusters_.push(cluster);\n  }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n  if (!this.ready_) {\n    return;\n  }\n\n  // Get our current map view bounds.\n  // Create a new bounds object so we don't affect the map.\n  var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n      this.map_.getBounds().getNorthEast());\n  var bounds = this.getExtendedBounds(mapBounds);\n\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n      this.addToClosestCluster_(marker);\n    }\n  }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n  this.markerClusterer_ = markerClusterer;\n  this.map_ = markerClusterer.getMap();\n  this.gridSize_ = markerClusterer.getGridSize();\n  this.minClusterSize_ = markerClusterer.getMinClusterSize();\n  this.averageCenter_ = markerClusterer.isAverageCenter();\n  this.center_ = null;\n  this.markers_ = [];\n  this.bounds_ = null;\n  this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n      markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n  if (this.markers_.indexOf) {\n    return this.markers_.indexOf(marker) != -1;\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n  if (this.isMarkerAlreadyAdded(marker)) {\n    return false;\n  }\n\n  if (!this.center_) {\n    this.center_ = marker.getPosition();\n    this.calculateBounds_();\n  } else {\n    if (this.averageCenter_) {\n      var l = this.markers_.length + 1;\n      var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n      var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n      this.center_ = new google.maps.LatLng(lat, lng);\n      this.calculateBounds_();\n    }\n  }\n\n  marker.isAdded = true;\n  this.markers_.push(marker);\n\n  var len = this.markers_.length;\n  if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n    // Min cluster size not reached so show the marker.\n    marker.setMap(this.map_);\n  }\n\n  if (len == this.minClusterSize_) {\n    // Hide the markers that were showing.\n    for (var i = 0; i < len; i++) {\n      this.markers_[i].setMap(null);\n    }\n  }\n\n  if (len >= this.minClusterSize_) {\n    marker.setMap(null);\n  }\n\n  this.updateIcon();\n  return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n  return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  var markers = this.getMarkers();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n  return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n  this.clusterIcon_.remove();\n  this.markers_.length = 0;\n  delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n  return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n  return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n  return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n  var zoom = this.map_.getZoom();\n  var mz = this.markerClusterer_.getMaxZoom();\n\n  if (mz && zoom > mz) {\n    // The zoom is greater than our max zoom so show all the markers in cluster.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n      marker.setMap(this.map_);\n    }\n    return;\n  }\n\n  if (this.markers_.length < this.minClusterSize_) {\n    // Min cluster size not yet reached.\n    this.clusterIcon_.hide();\n    return;\n  }\n\n  var numStyles = this.markerClusterer_.getStyles().length;\n  var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n  this.clusterIcon_.setCenter(this.center_);\n  this.clusterIcon_.setSums(sums);\n  this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n  cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n  this.styles_ = styles;\n  this.padding_ = opt_padding || 0;\n  this.cluster_ = cluster;\n  this.center_ = null;\n  this.map_ = cluster.getMap();\n  this.div_ = null;\n  this.sums_ = null;\n  this.visible_ = false;\n\n  this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n */\nClusterIcon.prototype.triggerClusterClick = function() {\n  var markerClusterer = this.cluster_.getMarkerClusterer();\n\n  // Trigger the clusterclick event.\n  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);\n\n  if (markerClusterer.isZoomOnClick()) {\n    // Zoom into the cluster.\n    this.map_.fitBounds(this.cluster_.getBounds());\n  }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n  this.div_ = document.createElement('DIV');\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.innerHTML = this.sums_.text;\n  }\n\n  var panes = this.getPanes();\n  panes.overlayMouseTarget.appendChild(this.div_);\n\n  var that = this;\n  google.maps.event.addDomListener(this.div_, 'click', function() {\n    that.triggerClusterClick();\n  });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n  var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n  pos.x -= parseInt(this.width_ / 2, 10);\n  pos.y -= parseInt(this.height_ / 2, 10);\n  return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.top = pos.y + 'px';\n    this.div_.style.left = pos.x + 'px';\n  }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n  if (this.div_) {\n    this.div_.style.display = 'none';\n  }\n  this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n  if (this.div_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.style.display = '';\n  }\n  this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n  this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n  if (this.div_ && this.div_.parentNode) {\n    this.hide();\n    this.div_.parentNode.removeChild(this.div_);\n    this.div_ = null;\n  }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n  this.sums_ = sums;\n  this.text_ = sums.text;\n  this.index_ = sums.index;\n  if (this.div_) {\n    this.div_.innerHTML = sums.text;\n  }\n\n  this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n  var index = Math.max(0, this.sums_.index - 1);\n  index = Math.min(this.styles_.length - 1, index);\n  var style = this.styles_[index];\n  this.url_ = style['url'];\n  this.height_ = style['height'];\n  this.width_ = style['width'];\n  this.textColor_ = style['textColor'];\n  this.anchor_ = style['anchor'];\n  this.textSize_ = style['textSize'];\n  this.backgroundPosition_ = style['backgroundPosition'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n  this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n  var style = [];\n  style.push('background-image:url(' + this.url_ + ');');\n  var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n  style.push('background-position:' + backgroundPosition + ';');\n\n  if (typeof this.anchor_ === 'object') {\n    if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n        this.anchor_[0] < this.height_) {\n      style.push('height:' + (this.height_ - this.anchor_[0]) +\n          'px; padding-top:' + this.anchor_[0] + 'px;');\n    } else {\n      style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n          'px;');\n    }\n    if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n        this.anchor_[1] < this.width_) {\n      style.push('width:' + (this.width_ - this.anchor_[1]) +\n          'px; padding-left:' + this.anchor_[1] + 'px;');\n    } else {\n      style.push('width:' + this.width_ + 'px; text-align:center;');\n    }\n  } else {\n    style.push('height:' + this.height_ + 'px; line-height:' +\n        this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n  }\n\n  var txtColor = this.textColor_ ? this.textColor_ : 'black';\n  var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n  style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n      pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n      txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n  return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nglobal['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\n\nmodule.exports = MarkerClusterer;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/node-js-marker-clusterer/src/markerclusterer.js\n// module id = 2\n// module chunks = 0","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 3\n// module chunks = 0","(function(root, factory) {\n\n\tif (root === null) {\n\t\tthrow new Error('Google-maps package can be used only in browser');\n\t}\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.GoogleMapsLoader = factory();\n\t}\n\n})(typeof window !== 'undefined' ? window : null, function() {\n\n\n\t'use strict';\n\n\n\tvar googleVersion = '3.18';\n\n\tvar script = null;\n\n\tvar google = null;\n\n\tvar loading = false;\n\n\tvar callbacks = [];\n\n\tvar onLoadEvents = [];\n\n\tvar originalCreateLoaderMethod = null;\n\n\n\tvar GoogleMapsLoader = {};\n\n\n\tGoogleMapsLoader.URL = 'https://maps.googleapis.com/maps/api/js';\n\n\tGoogleMapsLoader.KEY = null;\n\n\tGoogleMapsLoader.LIBRARIES = [];\n\n\tGoogleMapsLoader.CLIENT = null;\n\n\tGoogleMapsLoader.CHANNEL = null;\n\n\tGoogleMapsLoader.LANGUAGE = null;\n\n\tGoogleMapsLoader.REGION = null;\n\n\tGoogleMapsLoader.VERSION = googleVersion;\n\n\tGoogleMapsLoader.WINDOW_CALLBACK_NAME = '__google_maps_api_provider_initializator__';\n\n\n\tGoogleMapsLoader._googleMockApiObject = {};\n\n\n\tGoogleMapsLoader.load = function(fn) {\n\t\tif (google === null) {\n\t\t\tif (loading === true) {\n\t\t\t\tif (fn) {\n\t\t\t\t\tcallbacks.push(fn);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tloading = true;\n\n\t\t\t\twindow[GoogleMapsLoader.WINDOW_CALLBACK_NAME] = function() {\n\t\t\t\t\tready(fn);\n\t\t\t\t};\n\n\t\t\t\tGoogleMapsLoader.createLoader();\n\t\t\t}\n\t\t} else if (fn) {\n\t\t\tfn(google);\n\t\t}\n\t};\n\n\n\tGoogleMapsLoader.createLoader = function() {\n\t\tscript = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.src = GoogleMapsLoader.createUrl();\n\n\t\tdocument.body.appendChild(script);\n\t};\n\n\n\tGoogleMapsLoader.isLoaded = function() {\n\t\treturn google !== null;\n\t};\n\n\n\tGoogleMapsLoader.createUrl = function() {\n\t\tvar url = GoogleMapsLoader.URL;\n\n\t\turl += '?callback=' + GoogleMapsLoader.WINDOW_CALLBACK_NAME;\n\n\t\tif (GoogleMapsLoader.KEY) {\n\t\t\turl += '&key=' + GoogleMapsLoader.KEY;\n\t\t}\n\n\t\tif (GoogleMapsLoader.LIBRARIES.length > 0) {\n\t\t\turl += '&libraries=' + GoogleMapsLoader.LIBRARIES.join(',');\n\t\t}\n\n\t\tif (GoogleMapsLoader.CLIENT) {\n\t\t\turl += '&client=' + GoogleMapsLoader.CLIENT + '&v=' + GoogleMapsLoader.VERSION;\n\t\t}\n\n\t\tif (GoogleMapsLoader.CHANNEL) {\n\t\t\turl += '&channel=' + GoogleMapsLoader.CHANNEL;\n\t\t}\n\n\t\tif (GoogleMapsLoader.LANGUAGE) {\n\t\t\turl += '&language=' + GoogleMapsLoader.LANGUAGE;\n\t\t}\n\n\t\tif (GoogleMapsLoader.REGION) {\n\t\t\turl += '&region=' + GoogleMapsLoader.REGION;\n\t\t}\n\n\t\treturn url;\n\t};\n\n\n\tGoogleMapsLoader.release = function(fn) {\n\t\tvar release = function() {\n\t\t\tGoogleMapsLoader.KEY = null;\n\t\t\tGoogleMapsLoader.LIBRARIES = [];\n\t\t\tGoogleMapsLoader.CLIENT = null;\n\t\t\tGoogleMapsLoader.CHANNEL = null;\n\t\t\tGoogleMapsLoader.LANGUAGE = null;\n\t\t\tGoogleMapsLoader.REGION = null;\n\t\t\tGoogleMapsLoader.VERSION = googleVersion;\n\n\t\t\tgoogle = null;\n\t\t\tloading = false;\n\t\t\tcallbacks = [];\n\t\t\tonLoadEvents = [];\n\n\t\t\tif (typeof window.google !== 'undefined') {\n\t\t\t\tdelete window.google;\n\t\t\t}\n\n\t\t\tif (typeof window[GoogleMapsLoader.WINDOW_CALLBACK_NAME] !== 'undefined') {\n\t\t\t\tdelete window[GoogleMapsLoader.WINDOW_CALLBACK_NAME];\n\t\t\t}\n\n\t\t\tif (originalCreateLoaderMethod !== null) {\n\t\t\t\tGoogleMapsLoader.createLoader = originalCreateLoaderMethod;\n\t\t\t\toriginalCreateLoaderMethod = null;\n\t\t\t}\n\n\t\t\tif (script !== null) {\n\t\t\t\tscript.parentElement.removeChild(script);\n\t\t\t\tscript = null;\n\t\t\t}\n\n\t\t\tif (fn) {\n\t\t\t\tfn();\n\t\t\t}\n\t\t};\n\n\t\tif (loading) {\n\t\t\tGoogleMapsLoader.load(function() {\n\t\t\t\trelease();\n\t\t\t});\n\t\t} else {\n\t\t\trelease();\n\t\t}\n\t};\n\n\n\tGoogleMapsLoader.onLoad = function(fn) {\n\t\tonLoadEvents.push(fn);\n\t};\n\n\n\tGoogleMapsLoader.makeMock = function() {\n\t\toriginalCreateLoaderMethod = GoogleMapsLoader.createLoader;\n\n\t\tGoogleMapsLoader.createLoader = function() {\n\t\t\twindow.google = GoogleMapsLoader._googleMockApiObject;\n\t\t\twindow[GoogleMapsLoader.WINDOW_CALLBACK_NAME]();\n\t\t};\n\t};\n\n\n\tvar ready = function(fn) {\n\t\tvar i;\n\n\t\tloading = false;\n\n\t\tif (google === null) {\n\t\t\tgoogle = window.google;\n\t\t}\n\n\t\tfor (i = 0; i < onLoadEvents.length; i++) {\n\t\t\tonLoadEvents[i](google);\n\t\t}\n\n\t\tif (fn) {\n\t\t\tfn(google);\n\t\t}\n\n\t\tfor (i = 0; i < callbacks.length; i++) {\n\t\t\tcallbacks[i](google);\n\t\t}\n\n\t\tcallbacks = [];\n\t};\n\n\n\treturn GoogleMapsLoader;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/google-maps/lib/Google.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}